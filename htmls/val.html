<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<title>情人节快乐宝宝</title>
	<link rel="stylesheet" href="/dist/css/birthday.css">
</head>

<body>
	<img id="icon" class="paused" src="/dist/img_sp/musicon.png" alt="">
	<div id="first">
		<canvas id="birthday" width="300" height="300"></canvas>
		<img src="/dist/img_sp/bg.webp" class="bg-img" alt="">
		<div class="bottom">
			<div class="_1"></div>
			<div class="_2"></div>
			<div class="_3"></div>
		</div>
	</div>
	<ul id="second">
	</ul>
	<div class="img-default">
	</div>
	<audio id="music" preload="auto" loop src="/dist/music/music.mp3"></audio>
	<script>
	// 先加载默认图片
	var img = new Image();
	img.src = '/dist/img_sp/love.png';
	</script>
	<script>
	var w = 8;
	var wh = 300;

	var width = Math.min(document.documentElement.clientWidth, 375);
	var height = Math.min(document.documentElement.clientHeight, 400);
	var $canvas = document.getElementById("birthday");
	$canvas.setAttribute("width", width);
	$canvas.setAttribute("height", height);

	//开始画  
	var x0 = width / 2;
	var y0 = height / 2;
	var ctx = $canvas.getContext("2d");

	ctx.fillStyle = "rgb(232, 116, 116)";
	// var x, y;

	var t = -3,
		_t = 3;
	var interval = setInterval(function() {
		if (t > 0) {
			clearInterval(interval);
			$canvas.className = 'floating';
		} else {
			print(ctx, t);
			t = t + 0.005;
			print(ctx, _t);
			_t = _t - 0.005;
		}
	}, 16);
	// for (var t = -3; t <= 3; t = t + 0.001) {
	// 	x = 16 * Math.pow(Math.sin(t), 3);
	// 	y = 13 * Math.cos(t) - 5 * Math.cos(t * 2) - 2 * Math.cos(t * 3) - Math.cos(t * 4);
	// 	// 倍数
	// 	x = x * w;
	// 	y = y * w;
	// 	// 屏幕中心为原点  
	// 	ctx.fillRect(x + x0, y0 - y, 1, 1);
	// }

	// ctx.translate(-75, 0);
	ctx.font = "20px Rubik";
	ctx.fillStyle = 'rgb(232, 116, 116)';
	ctx.fillText("致我的小可爱", x0 - 60, y0);

	function print(ctx, t) {
		var x, y;
		x = 16 * Math.pow(Math.sin(t), 3);
		y = 13 * Math.cos(t) - 5 * Math.cos(t * 2) - 2 * Math.cos(t * 3) - Math.cos(t * 4);
		// 倍数
		x = x * w;
		y = y * w;
		// 屏幕中心为原点  
		ctx.fillRect(x + x0, y0 - y, 1, 1);
	}
	</script>
	<script src="/dist/scripts/birthday.js"></script>
</body>

</html>